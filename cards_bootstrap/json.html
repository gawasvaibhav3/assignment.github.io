<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Product List</title>
  </head>
  <body>
    <h1>Product List</h1>
    <button onclick="fetchData()">Fetch Data</button>
    <select id="category-select">smartphones
    </select>
    <div id="product-list"></div>

    <script>
      function fetchData() {
        // fetch data from API
        fetch('https://dummyjson.com/products')
          .then(response => response.json())
          .then(data => displayProductList(data))
          //The catch() method of a Promise object schedules a function to be called when the promise is rejected
          .catch(error => console.error(error));
      }

      function displayProductList(products) 
      {
        // clear existing product list
        const productList = document.getElementById('product-list');
        productList.innerHTML = '';

        // create dropdown menu of categories
        const categories = new Set(products.map(product => product.category));
        const categorySelect = document.getElementById('category-select');
        categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category;
          option.text = category;
          categorySelect.add(option);
        });

        // display products of selected category
        categorySelect.addEventListener('change', (event) => {
          const selectedCategory = event.target.value;
          const filteredProducts = products.filter(product => product.category === selectedCategory);
          const productHtml = filteredProducts.map(product => `
            <div>
              <h2>${product.brand} ${product.productName}</h2>
              <p>Price: ${product.price}</p>
              <p>Category: ${product.category}</p>
              <img src="${product.images[0].url}" alt="${product.images[0].altText}">
            </div>
          `).join('');
          productList.innerHTML = productHtml;
        });
      }
    </script>
  </body>
</html>
